<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-JP">
<meta name="GENERATOR" content="IBM WebSphere Studio Homepage Builder Version 7.0.0.0 for Windows">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>利用説明書</title>
<style type="text/css">
<!--
body{
  font-size : 80%;
}
A{
  text-decoration : none;
}
H2{
  letter-spacing : 1px;
  color : #ff6600;
  text-align : center;
}
#main_div{
  text-align : left;
  width : 400px;
  height : 100%;
  line-height : 1.4;
}
TABLE{
  width : 100%;
  border-style : solid solid solid solid;
  border-top-color : silver;
  border-right-color : silver;
  border-bottom-color : silver;
  border-left-color : silver;
}
H4{
  border-left-width : 3px;
  border-left-style : solid;
  border-left-color : #ff6600;
  padding-left : 5px;
  color : #ff6600;
  border-bottom-width : 1px;
  border-bottom-style : dotted;
  border-bottom-color : #ff6600;
}
#quote{
  padding-left : 5px;
  margin-top : 5px;
  margin-left : 10px;
  margin-right : 10px;
  margin-bottom : 5px;
  border-left-width : 1px;
  border-left-style : solid;
  border-left-color : #ffbe7d;
}
TD{
  border-width : 1px 1px 1px 1px;
  border-style : solid solid solid solid;
  border-color : silver silver silver silver;
}
TH{
  border-width : 1px 1px 1px 1px;
  border-style : solid solid solid solid;
  border-color : silver silver silver silver;
}
IMG{
  padding-left : 10px;
  padding-right : 10px;
}
.code{
  background: #FFFFFF;
  border: 1px inset #000080;
  padding: 0px 6px 6px 6px;
  width: 380px;
  height: 100%;
  margin: 0.5em;
  overflow: auto;
}
.news{
  font-size : 0.8em;
  letter-spacing : 1px;
}
-->
</style>
</head>
<body>
<div align="center">
<div id="main_div">
<h2>Bulletin</h2>
<h4>このモジュールについて</h4>
<img src="images/bulletin_logo.png" width="92" height="52" border="0" align="left">ニュースモジュールのひとつです。newsの古いコードを刷新することが開発のきっかけとなりました。最終的に過去の有用なハックなどを盛り込み、Duplicatable機能も付け加えました。
<h4>機能説明</h4>
<ul>
  <li>ニュース投稿・編集・削除
  <li>アーカイブ
  <li>RSS配信
  <li>モジュールの複製
  <li>newsの記事の取り込み
</ul>
<h4>newsからの変更点</h4>
<ul>
  <li>各ファイルでassignされているテーマ変数から出来るだけHTMLタグを取り除いた。
  <li>各ファイルにおいてディレクトリ名を変更できるように改変した。
  <li>各ファイルでinclude から require に関数を交代した。
  <li>$HTTP_*_VALUE を $_* に置き換えた。
  <li>テンプレートを各PHPファイルの変更にあわせて改変した。
  <li>テンプレートに&lt;{strip}&gt;タグを加えた。
  <li>print.phpをテンプレート出力に対応した。
  <li>各ファイルにおいて，相対パスを絶対パスに変更した。
  <li>print.phpにおける潜在的なtypoを訂正した。
  <li>「のこり***バイト」をマルチバイト環境に対応し，かつ「のこり**文字」に変更。
  <li>「分」の選択肢が 0~60 だったので 0~59 に修正。
  <li>記事投稿の日時選択フォーマット「月：mm 日：dd 年：YYYY 時：HH 分：ii」を，日本語式に「YYYY年mm月dd日HH時ii分」に変更した。
  <li>アーカイブの表示方法を，スペースを有効活用するように変更した。
  <li>archive.phpのSQL記述をclassへ移動した。
  <li>ニュース投稿権限をグループごとに与えられる機能を追加した。（XOOPS2.0.4以降）
  <li>ニュース投稿自動承認をグループごとで決められる機能を追加した。（XOOPS2.0.4以降）
  <li>ユーザーのタイムゾーンが反映されない部分を修正した。
  <li>DB項目の’story_type’を’type’に変更した。
  <li>submit.phpにおける，本文フォームのサイズを一般設定で変更できる機能を追加した。
  <li>コメントに記事の存在確認処理を追加。
  <li>検索結果の日時を投稿日時から掲載日時に変更した。
  <li>記事から画像がはみ出してしまうバグを修正。
  <li>記事の題名をサイトのタイトルに。
  <li>article.phpにおける$storypageの妥当性を確認する処理を追加。
  <li>言語の名付け規則に従ってlanguageファイルを訂正した。（_NW_*→_MD_*）
  <li>本名もassignした。
  <li>HTMLが有効なら改行を無効にした。
  <li>クラスから出来る限りHTMLを追放した。→テンプレートへ。
  <li>Ryujiさんのブロックを取り入れた。
  <li>カレンダーブロックを追加。
  <li>GIJOEさんのmyblockadminを取り入れた。
  <li>投稿数加算処理を改善。
  <li>コメントブロックを追加した。
  <li>期限切れの記事が見られるバグ（仕様？）を修正。
  <li>記事の編集・管理の使い勝手を改善する。
  <li>メールの文字化けは&quot;Tell A Friend&quot;に対応。
  <li>ルートコントローラで配信していたRSSをモジュールの一部にした。→グループ設定が反映されるようになる。
  <li>複製可能にした。
</ul>
ほかにも理解不能な仕様を改善したり、ずっと放置されていたっぽいバグFixをしたりといろいろ変わった点があります。
<h4>ToDo</h4>
<ul>
  <li>RSS配信の画像のURLを指定する
  <li>TinyDをまねて静的URLを生成するとか。
  <li>トラックバック機能を追加してみるとか。
  <li>ファイルアップ機能を追加したほうがいいか。
  <li>携帯電話端末対応は必須か。
</ul>
<h4>複製方法</h4>
Bulletinの複製機能はDuplicatable v2.xです。<br>
ディレクトリ名の表記ルールは　<b>任意の半角英字</b>＋<b>任意の半角数字</b> です。<br>
また１つだけ半角数字を省略したディレクトリを作ることができます。<br>
たとえば、bulletin・bulletin0・bulletin1・bulletin2……やnews・news0・news1・news2……のように4つまで複製することができます。5つ目以上複製は、テンプレート・SQLファイル・モジュールアイコン画像それぞれコピーすることで可能です。<br>
<br>
5つ目のbulletinの作り方<br>
<br>
まず、bulletinディレクトリ一式をコピーし、bulletin3にリネームします。<br>
<br>
次に、下記のファイルを作って下さい。<br>
<br>
・modules/bulletin3/images/bulletin3_logo.png<br>
　　…　画像処理ソフトなどでロゴを作って用意してください。<br>
<br>
・modules/bulletin3/sql/mysql3.sql<br>
　 …　mysql.sqlをコピーしてmysql3.sqlに名称変更し、エディタでファイルを開き
<div class="code">CREATE TABLE `bulletin_stories` (<br>
・・・<br>
CREATE TABLE `bulletin_topics` (</div>
を下記のように変更してください。
<div class="code">CREATE TABLE `bulletin<b><font color="#0000ff">3</font></b>_stories` (<br>
・・・<br>
CREATE TABLE `bulletin<b><font color="#0000ff">3</font></b>_topics` (</div>
<br>
<br>
modules/bulletin3/templates/下のファイルを以下のようにリネームしてください。<br>
・bulletin_archive.html　→　bulletin3_archive.html<br>
・bulletin_article.html　→　bulletin3_article.html<br>
・bulletin_index.html　→　bulletin3_index.html<br>
・bulletin_item.html　→　bulletin3_item.html<br>
・bulletin_print.html　→　bulletin3_print.html<br>
・bulletin_rss.html　→　bulletin3_rss.html<br>
<br>
modules/bulletin3/templates/blocks/下のファイルを以下のようにリネームしてください<br>
・bulletin_block_bigstory.html　→　bulletin3_block_bigstory.html<br>
・bulletin_block_cnew.html　→　bulletin3_block_cnew.html<br>
・bulletin_block_comments.html　→　bulletin3_block_comments.html<br>
・bulletin_block_new.html　→　bulletin3_block_new.html<br>
・bulletin_block_topics.html　→　bulletin3_block_topics.html
<h4>newsのデータベースとの差違</h4>
`storyid` int(8) unsigned NOT NULL auto_increment,<br>
→変更無し<br>
`uid` int(5) unsigned NOT NULL default '0',<br>
→変更無し<br>
`title` varchar(255) NOT NULL default '',<br>
→変更無し<br>
`created` int(10) unsigned NOT NULL default '0',<br>
→変更無し<br>
`published` int(10) unsigned NOT NULL default '0',<br>
→変更無し<br>
`expired` int(10) unsigned NOT NULL default '0',<br>
→変更無し<br>
`hostname` varchar(20) NOT NULL default '',<br>
→変更無し<br>
`html` tinyint(1) NOT NULL default '0',<br>
→nohtmlだと否定が基本で認知的に非効率的なので、肯定に変更<br>
`smiley` tinyint(1) NOT NULL default '0',<br>
→nosmileyだと否定が基本で認知的に非効率的なので、肯定に変更<br>
`br` tinyint(1) NOT NULL default '0',<br>
→以前から必要だと言われていたので追加<br>
`xcode` tinyint(1) NOT NULL default '0',<br>
→なかったので追加<br>
`hometext` text NOT NULL,<br>
→変更無し<br>
`bodytext` text NOT NULL,<br>
→変更無し<br>
`counter` int(8) unsigned NOT NULL default '0',<br>
→変更無し<br>
`topicid` smallint(4) unsigned NOT NULL default '1',<br>
→変更無し<br>
`ihome` tinyint(1) NOT NULL default '0',<br>
→0と1を逆転<br>
`notifypub` tinyint(1) NOT NULL default '0',<br>
→変更無し<br>
`type` tinyint(1) NOT NULL default '0',<br>
→”story_type”だったもの。処理しやすいように数値に変更　admin = 2; user = 1<br>
`topicimg` tinyint(1) NOT NULL default '0',<br>
→”topicdisplay”,”topicalign”をひとまとめにして、数値で表すように変更。<br>
`comments` smallint(5) unsigned NOT NULL default '0',<br>
→変更無し<br>
<h4>インストール方法</h4>
1) 圧縮ファイルを解凍してモジュールディレクトリにアップロード。<br>
<br>
2) モジュール管理にてインストールしてください。
<h4>アンインストール方法</h4>
通常のモジュール同様にモジュール管理よりアンインストールを実行してください。
<h4>更新履歴</h4>
<table cellpadding="0" cellspacing="0" class="news" border="0">
  <col span="3">
  <tbody>
    <tr>
      <th align="center">Ver</th>
      <th align="center">Date</th>
      <th align="center">Category</th>
      <th align="center">Note</th>
    </tr>
    <tr>
      <td align="center">1.06</td>
      <td align="center">2006-06-23</td>
      <td align="center">バグ</td>
      <td>複製したテンプレートがもとのテンプレートを参照していたバグを修正。(thx o-nishi and kenchi)</td>
    </tr>
    <tr>
      <td align="center">1.05</td>
      <td align="center">2006-05-26</td>
      <td align="center">バグ</td>
      <td>イベント通知の「新規ニュース記事が掲載された場合に通知する」が機能していないバグを修正。</td>
    </tr>
    <tr>
      <td align="center">1.05</td>
      <td align="center">2006-05-26</td>
      <td align="center">バグ</td>
      <td>複製したブリテンでイベント通知が正常に機能しないバグを修正。</td>
    </tr>
    <tr>
      <td align="center">1.042</td>
      <td align="center">2006-05-15</td>
      <td align="center">バグ</td>
      <td>「最新ニュース」ブロックで「hometextを表示する件数」を指定している場合に、掲載期限が切れている記事が載ってしまうバグを修正。</td>
    </tr>
    <tr>
      <td align="center">1.041</td>
      <td align="center">2006-05-14</td>
      <td align="center">バグ</td>
      <td>ブロックで「残りX文字」が正しく表示されないバグを修正。</td>
    </tr>
    <tr>
      <td align="center">1.04</td>
      <td align="center">2006-05-12</td>
      <td align="center">バグ</td>
      <td>期限切れ記事が20件以上閲覧できないバグを修正</td>
    </tr>
    <tr>
      <td align="center">1.04</td>
      <td align="center">2006-05-12</td>
      <td align="center">バグ</td>
      <td>カテゴリー別ブロックで「続きを読む」が表示されないバグを修正</td>
    </tr>
    <tr>
      <td align="center">1.04</td>
      <td align="center">2006-05-12</td>
      <td align="center">バグ</td>
      <td>RSSの表示不備を修正</td>
    </tr>
    <tr>
      <td>1.03</td>
      <td>2006-03-27</td>
      <td align="center">バグ</td>
      <td>コメント数のバグを修正</td>
    </tr>
    <tr>
      <td align="center">1.02</td>
      <td align="center">2006-02-26</td>
      <td align="center">バグ</td>
      <td>複製したBulletinのブロックが正しく機能しないバグ。</td>
    </tr>
    <tr>
      <td align="center">1.02</td>
      <td align="center">2006-02-26</td>
      <td align="center">追加</td>
      <td>newsからインポートした後のページに「戻る」リンクを追加。</td>
    </tr>
    <tr>
      <td align="center" height="17">1.02</td>
      <td align="center" height="17">2006-02-26</td>
      <td height="17" align="center">言語</td>
      <td height="17">englishを更新(thx Yuji)</td>
    </tr>
    <tr>
      <td align="center">1.02</td>
      <td align="center">2006-02-26</td>
      <td height="15" align="center">言語</td>
      <td height="15">catalanを追加(thx Yuji)</td>
    </tr>
    <tr>
      <td align="center">1.02</td>
      <td align="center">2006-02-26</td>
      <td align="center">言語</td>
      <td>portuguesebrを追加(thx Yuji)</td>
    </tr>
    <tr>
      <td align="center" height="17">1.02</td>
      <td align="center" height="17">2006-02-26</td>
      <td align="center">言語</td>
      <td>spanishを追加(thx Yuji)</td>
    </tr>
    <tr>
      <td align="center">1.02</td>
      <td align="center">2006-02-26</td>
      <td align="center">言語</td>
      <td>frenchを追加(thx gigamaster)</td>
    </tr>
    <tr>
      <td align="center" height="17">1.02</td>
      <td align="center" height="17">2006-02-26</td>
      <td align="center">言語</td>
      <td>tchineseを追加(thx kiang)</td>
    </tr>
    <tr>
      <td align="center">1.01</td>
      <td align="center">2006-02-21</td>
      <td align="center">言語</td>
      <td>englishを追加(thx Yuji)</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">バグ</td>
      <td>ブロックで件名の文字数切り詰めが出来ないバグを修正。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">追加</td>
      <td>Tell A Friendモジュールに対応。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">追加</td>
      <td>トピックを削除するとき、トピックに属する記事を他のトピックに移管できる機能を追加。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">追加</td>
      <td>「印刷する」「友達に知らせる」アイコンの表示非表示を選択できるように変更。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">追加</td>
      <td>「最新ニュース」で本文を複数表示できるように変更。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">追加</td>
      <td>RSSへのリンクを表示できるように変更。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">バグ</td>
      <td>[編集]がリンク切れしていたバグを修正。</td>
    </tr>
    <tr>
      <td>1.01</td>
      <td>2006-02-20</td>
      <td align="center">変更</td>
      <td>「トピック」という表記を「カテゴリ」に統一した。</td>
    </tr>
    <tr>
      <td nowrap>1.0</td>
      <td nowrap>2006-02-16</td>
      <td align="center">その他</td>
      <td nowrap>テスト版リリース</td>
    </tr>
  </tbody>
</table>
<h4>謝辞</h4>
myblocksadminをGIJOEさんからお借りしました。&lt;<a href="http://www.peak.ne.jp/">http://www.peak.ne.jp/</a>&gt;</div>
</div>
</body>
</html>